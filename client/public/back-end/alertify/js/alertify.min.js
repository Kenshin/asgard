/**
 * alertify
 * An unobtrusive customizable JavaScript notification system
 *
 * @author Fabien Doiron <fabien.doiron@gmail.com>
 * @copyright Fabien Doiron 2013
 * @license MIT <http://opensource.org/licenses/mit-license.php>
 * @link http://fabien-d.github.com/alertify.js/
 * @module alertify
 * @version 0.3.8
 */
(function(a,b){"use strict";var d,c=a.document;d=function(){var i,j,k,l,m,n,o,p,q,r,s,t,d={},e={},f=!1,g={ENTER:13,ESC:27,SPACE:32},h=[];return e={buttons:{holder:'<div class="modal-footer">{{buttons}}</div>',submit:'<button type="submit" class="alertify-button alertify-button-ok" id="alertify-ok">{{ok}}</button>',ok:'<button type="button" class="btn btn-primary contol-button-height" id="alertify-ok">{{ok}}</button>',cancel:'<button type="button" class="btn contol-button-height" id="alertify-cancel">{{cancel}}</button>'},input:'<div class="alertify-text-wrapper"><input type="text" class="alertify-text" id="alertify-text"></div>',message:'<p class="alertify-message">{{message}}</p>',log:'<article class="alertify-log{{class}}">{{message}}</article>'},t=function(){var a,d=c.createElement("fakeelement"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"};for(a in e)if(d.style[a]!==b)return e[a]},i=function(a){return c.getElementById(a)},d={labels:{ok:"OK",cancel:"Cancel"},delay:5e3,buttonReverse:!1,buttonFocus:"ok",transition:b,addListeners:function(a){var m,n,o,p,q,d=k!==b,e=j!==b,f=s!==b,h="",i=this;m=function(c){return c.preventDefault!==b&&c.preventDefault(),o(c),s!==b&&(h=s.value),"function"==typeof a&&(s!==b?a(!0,h):a(!0)),!1},n=function(c){return c.preventDefault!==b&&c.preventDefault(),o(c),"function"==typeof a&&a(!1),!1},o=function(){i.hide(),i.unbind(c.body,"keyup",p),i.unbind(l,"focus",q),f&&i.unbind(r,"submit",m),d&&i.unbind(k,"click",m),e&&i.unbind(j,"click",n)},p=function(a){var b=a.keyCode;b!==g.SPACE||f||m(a),b===g.ESC&&e&&n(a)},q=function(){f?s.focus():e?j.focus():k.focus()},this.bind(l,"focus",q),d&&this.bind(k,"click",m),e&&this.bind(j,"click",n),this.bind(c.body,"keyup",p),f&&this.bind(r,"submit",m),this.transition===b&&this.setFocus()},bind:function(a,b,c){"function"==typeof a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)},handleErrors:function(){if(a.onerror!==b){var c=this;return a.onerror=function(a,b,d){c.error("["+a+" on line "+d+" of "+b+"]",0)},!0}return!1},appendButtons:function(a,b){return this.buttonReverse?b+a:a+b},build:function(a){var b="",c=a.type,f=a.message,g=a.cssClass||"";switch(b+='<div class="alertify-dialog">',"none"===d.buttonFocus&&(b+='<a href="#" id="alertify-noneFocus" class="alertify-hidden"></a>'),"prompt"===c&&(b+='<form id="alertify-form">'),b+='<article class="alertify-inner">',b+=e.message.replace("{{message}}",f),"prompt"===c&&(b+=e.input),b+=e.buttons.holder,b+="</article>","prompt"===c&&(b+="</form>"),b+='<a id="alertify-resetFocus" class="alertify-resetFocus" href="#">Reset Focus</a>',b+="</div>",c){case"confirm":b=b.replace("{{buttons}}",this.appendButtons(e.buttons.cancel,e.buttons.ok)),b=b.replace("{{ok}}",this.labels.ok).replace("{{cancel}}",this.labels.cancel);break;case"prompt":b=b.replace("{{buttons}}",this.appendButtons(e.buttons.cancel,e.buttons.submit)),b=b.replace("{{ok}}",this.labels.ok).replace("{{cancel}}",this.labels.cancel);break;case"alert":b=b.replace("{{buttons}}",e.buttons.ok),b=b.replace("{{ok}}",this.labels.ok);break;default:}return p.className="alertify alertify-show alertify-"+c+" "+g,o.className="alertify-cover",b},close:function(a,c){var f,g,d=c&&!isNaN(c)?+c:this.delay,e=this;this.bind(a,"click",function(){f(a)}),g=function(a){a.stopPropagation(),e.unbind(this,e.transition,g),q.removeChild(this),q.hasChildNodes()||(q.className+=" alertify-logs-hidden")},f=function(a){a!==b&&a.parentNode===q&&(e.transition!==b?(e.bind(a,e.transition,g),a.className+=" alertify-log-hide"):(q.removeChild(a),q.hasChildNodes()||(q.className+=" alertify-logs-hidden")))},0!==c&&setTimeout(function(){f(a)},d)},dialog:function(a,d,e,g,i){n=c.activeElement;var j=function(){p&&null!==p.scrollTop||j()};if("string"!=typeof a)throw Error("message must be a string");if("string"!=typeof d)throw Error("type must be a string");if(e!==b&&"function"!=typeof e)throw Error("fn must be a function");return"function"==typeof this.init&&(this.init(),j()),h.push({type:d,message:a,callback:e,placeholder:g,cssClass:i}),f||this.setup(),this},extend:function(a){if("string"!=typeof a)throw Error("extend method must have exactly one paramter");return function(b,c){return this.log(b,a,c),this}},hide:function(){var a,c=this;h.splice(0,1),h.length>0?this.setup():(f=!1,a=function(b){b.stopPropagation(),p.className+=" alertify-isHidden",c.unbind(p,c.transition,a)},this.transition!==b?(this.bind(p,this.transition,a),p.className="alertify alertify-hide alertify-hidden"):p.className="alertify alertify-hide alertify-hidden alertify-isHidden",o.className="alertify-cover alertify-cover-hidden",n.focus())},init:function(){c.createElement("nav"),c.createElement("article"),c.createElement("section"),o=c.createElement("div"),o.setAttribute("id","alertify-cover"),o.className="alertify-cover alertify-cover-hidden",c.body.appendChild(o),p=c.createElement("section"),p.setAttribute("id","alertify"),p.className="alertify alertify-hidden",c.body.appendChild(p),q=c.createElement("section"),q.setAttribute("id","alertify-logs"),q.className="alertify-logs alertify-logs-hidden",c.body.appendChild(q),c.body.setAttribute("tabindex","0"),this.transition=t(),delete this.init},log:function(a,b,c){var d=function(){q&&null!==q.scrollTop||d()};return"function"==typeof this.init&&(this.init(),d()),q.className="alertify-logs",this.notify(a,b,c),this},notify:function(a,b,d){var e=c.createElement("article");e.className="alertify-log"+("string"==typeof b&&""!==b?" alertify-log-"+b:""),e.innerHTML=a,q.insertBefore(e,q.firstChild),setTimeout(function(){e.className=e.className+" alertify-log-show"},50),this.close(e,d)},set:function(a){var b;if("object"!=typeof a&&a instanceof Array)throw Error("args must be an object");for(b in a)a.hasOwnProperty(b)&&(this[b]=a[b])},setFocus:function(){s?(s.focus(),s.select()):m.focus()},setup:function(){var e,a=h[0],c=this;f=!0,e=function(a){a.stopPropagation(),c.setFocus(),c.unbind(p,c.transition,e)},this.transition!==b&&this.bind(p,this.transition,e),p.innerHTML=this.build(a),l=i("alertify-resetFocus"),k=i("alertify-ok")||b,j=i("alertify-cancel")||b,m="cancel"===d.buttonFocus?j:"none"===d.buttonFocus?i("alertify-noneFocus"):k,s=i("alertify-text")||b,r=i("alertify-form")||b,"string"==typeof a.placeholder&&""!==a.placeholder&&(s.value=a.placeholder),this.addListeners(a.callback)},unbind:function(a,b,c){"function"==typeof a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c)}},{alert:function(a,b,c){return d.dialog(a,"alert",b,"",c),this},confirm:function(a,b,c){return d.dialog(a,"confirm",b,"",c),this},extend:d.extend,init:d.init,log:function(a,b,c){return d.log(a,b,c),this},prompt:function(a,b,c,e){return d.dialog(a,"prompt",b,c,e),this},success:function(a,b){return d.log(a,"success",b),this},error:function(a,b){return d.log(a,"error",b),this},set:function(a){d.set(a)},labels:d.labels,debug:d.handleErrors}},"function"==typeof define?define([],function(){return new d}):a.alertify===b&&(a.alertify=new d)})(this);